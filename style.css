/* ==============================
Snakes & Ladders PWA â€” Final CSS
============================== */

/* -----------------------------
Variables
----------------------------- */
:root{
  --board-max: 720px;
  --frame-size: clamp(40px, 7%, 80px);
  --token-size: calc(var(--board-max) * 0.06);
  --accent: #2b6ef6;
  --cube-size: 110px;
}

/* -----------------------------
Reset
----------------------------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
  background:
    url('images/wood.png') center/cover fixed,
    linear-gradient(180deg,#efe8dd,#e0d2b9);
  display:flex;
  justify-content:center;
  padding:24px;
}

/* -----------------------------
Layout
----------------------------- */
.app{
  display:flex;
  gap:20px;
  width:100%;
  max-width:1200px;
  align-items:flex-start;
  justify-content:center;
  flex-wrap:wrap;
}

/* -----------------------------
Board column
----------------------------- */
.board-column {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  position: relative;
  flex: 1 1 auto;
}

.board-wrapper {
  position:relative;
  width: min(var(--board-max), 78vw);
  height: min(var(--board-max), 78vw);
  max-width: var(--board-max);
  max-height: var(--board-max);
  border-radius: 14px;
  box-shadow: 0 22px 60px rgba(0,0,0,0.42);
  overflow: hidden;
  background: #fff;
}

.board-wrapper::before {
  content: "";
  position: absolute;
  top: calc(-1 * var(--frame-size));
  left: calc(-1 * var(--frame-size));
  right: calc(-1 * var(--frame-size));
  bottom: calc(-1 * var(--frame-size));
  background-image: url('images/frame-wood.png');
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  z-index: 0;
  pointer-events: none;
}

.board-wrapper { z-index: 2; overflow: visible; }

.board-img {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}

/* -----------------------------
Grid overlay
----------------------------- */
.grid {
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns: repeat(10, 1fr);
  grid-template-rows: repeat(10, 1fr);
  gap:4px;
  padding:8px;
  z-index:2;
}

.grid .cell {
  border-radius:6px;
  background: rgba(255,255,255,0.02);
}

/* -----------------------------
Tokens with enhanced glow/shadow
----------------------------- */
.token {
  position:absolute;
  width: var(--token-size);
  height: var(--token-size);
  border-radius:50%;
  transform: translate(-50%, -50%);
  z-index:6;
  transition: left 320ms cubic-bezier(.2,.9,.2,1),
             top 320ms cubic-bezier(.2,.9,.2,1),
             box-shadow 0.2s ease;
  background-size: cover;
  background-position: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.35),
              0 0 6px rgba(255,255,255,0.15) inset;
}

.token1 { background-image: url('images/red.png'); }
.token2 { background-image: url('images/green.png'); }

/* Hop animation */
@keyframes token-slide {
  0% { transform: translate(-50%, -50%) scale(1); }
  40% { transform: translate(-50%, -52%) scale(1.05); }
  100% { transform: translate(-50%, -50%) scale(1); }
}
.token.slide { animation: token-slide 0.35s ease-in-out; }

/* Active player glow */
.token-active {
  box-shadow: 0 0 18px 6px rgba(255, 255, 255, 0.85);
  animation: token-pulse 1.2s ease-in-out infinite;
}
@keyframes token-pulse {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.08); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* Token jump for first two sixes */
@keyframes token-jump {
  0% { transform: translate(-50%, -50%) scale(1); }
  30% { transform: translate(-50%, -65%) scale(1.15); }
  60% { transform: translate(-50%, -45%) scale(0.95); }
  100% { transform: translate(-50%, -50%) scale(1); }
}
.token.jump {
  animation: token-jump 0.6s cubic-bezier(.3,.9,.4,1.2);
}

/* Red glow penalty for triple six */
@keyframes token-penalty-glow {
  0% { box-shadow: 0 0 0px rgba(255,0,0,0); }
  25% { box-shadow: 0 0 30px 12px rgba(255,0,0,0.9); }
  50% { box-shadow: 0 0 40px 16px rgba(255,0,0,1); }
  75% { box-shadow: 0 0 30px 12px rgba(255,0,0,0.9); }
  100% { box-shadow: 0 0 0px rgba(255,0,0,0); }
}
.token.penalty {
  animation: token-penalty-glow 1.2s ease-in-out;
}

/* -----------------------------
Control column â€” Glass panel
----------------------------- */
.control-column {
  flex: 1 1 340px;
  max-width: 380px;
  width: 100%;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(3px);
  padding:20px 22px;
  border-radius:14px;
  box-shadow:
    inset 0 0 12px rgba(255,255,255,0.15),
    0 14px 32px rgba(0,0,0,0.25);
  display:flex;
  flex-direction:column;
  gap:14px;
  align-items:center;
  border: 2px solid rgba(92,51,23,0.2);
}

/* Title and turn */
.title {
  text-align:center;
  font-size: clamp(1.2rem, 2.2vw, 1.5rem);
  font-family: "Georgia", serif;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.35);
}
.turn {
  text-align:center;
  font-weight:700;
  margin-top:4px;
  font-size: clamp(1.3rem, 2.6vw, 1.7rem);
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.35);
}

/* ==============================
Dice Stage
============================== */
.dice-stage {
  margin: 6px 0;
  width: var(--cube-size);
  height: var(--cube-size);
  perspective: 1400px;
}

/* ==============================
Dice Cube (NO shadows here)
============================== */
.dice-cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
  will-change: transform;
}

/* REMOVE any overlay or pseudo elements */
.dice-cube::before,
.dice-cube::after {
  content: none !important;
}

/* ==============================
Dice Faces
============================== */
.die-face {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 0;
  background-size: cover;
  background-position: center;
  backface-visibility: hidden;
  box-shadow:
    inset 0 1px 2px rgba(255,255,255,0.18),
    inset 0 -2px 3px rgba(0,0,0,0.22);
}

/* Face Images */
.face1 { background-image: url('images/die-1.png'); }
.face2 { background-image: url('images/die-2.png'); }
.face3 { background-image: url('images/die-3.png'); }
.face4 { background-image: url('images/die-4.png'); }
.face5 { background-image: url('images/die-5.png'); }
.face6 { background-image: url('images/die-6.png'); }

/* Face Positioning (anti-seam) */
.die-face:nth-child(1) { transform: rotateY(0deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }
.die-face:nth-child(2) { transform: rotateY(90deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }
.die-face:nth-child(3) { transform: rotateY(180deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }
.die-face:nth-child(4) { transform: rotateY(-90deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }
.die-face:nth-child(5) { transform: rotateX(90deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }
.die-face:nth-child(6) { transform: rotateX(-90deg) translateZ(calc(var(--cube-size) / 2 + 0.6px)); }

/* -----------------------------
Buttons
----------------------------- */
.controls-row,
.bottom-row {
  display:flex;
  flex-direction:column;
  gap:10px;
  max-width: 240px;
  align-items:center;
}

.btn {
  min-width: 200px;
  max-width: 240px;
  padding:10px 16px;
  border-radius:12px;
  font-weight:800;
  cursor:pointer;
  position: relative;
  transform: translateY(0);
  transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
}

/* Roll dice */
.btn.primary {
  background: linear-gradient(180deg, #8B4513, #5C3317);
  color:#fff;
  box-shadow: 0 6px 0 #4b2a12, 0 10px 20px rgba(0,0,0,0.35);
}
.btn.primary:hover { filter: brightness(1.05); }
.btn.primary:active {
  transform: translateY(4px);
  box-shadow: 0 2px 0 #4b2a12, 0 4px 10px rgba(0,0,0,0.25);
}

/* New Game */
.btn.secondary {
  background: linear-gradient(180deg,#fdf6e3,#f2e0b6);
  color: #5C3317;
  border: 1px solid rgba(92,51,23,0.25);
  box-shadow: 0 5px 0 #9c8a5c, 0 9px 18px rgba(0,0,0,0.25);
}
.btn.secondary:hover { filter: brightness(1.05); }
.btn.secondary:active {
  transform: translateY(3px);
  box-shadow: 0 2px 0 #9c8a5c, 0 4px 10px rgba(0,0,0,0.2);
}

/* -----------------------------
Modern Mode Toggle (Colorful)
----------------------------- */
.mode-toggle {
  width: 100%;
  display: flex;
  justify-content: center;
  margin: 4px 0 8px;
}
.mode-toggle.modern {
  display: flex;
  gap: 10px;
  width: 100%;
}
.mode-btn {
  flex: 1;
  padding: 10px 12px;
  border-radius: 14px;
  border: none;
  font-weight: 900;
  font-size: 1rem;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  color: #fff;
  box-shadow:
    inset 0 0 0 2px rgba(255,255,255,0.25),
    0 6px 14px rgba(0,0,0,0.25);
  transition:
    transform 0.12s ease,
    box-shadow 0.12s ease,
    background 0.2s ease,
    filter 0.2s ease;
}
.mode-btn:hover { filter: brightness(1.08); }

/* Active: 2 Player */
.mode-btn.active#mode-2p {
  background: linear-gradient(180deg, #51cf66, #2f9e44);
  box-shadow:
    0 6px 0 #1b7a32,
    0 10px 22px rgba(0,0,0,0.35);
}

/* Active: AI */
.mode-btn.active#mode-ai {
  background: linear-gradient(180deg, #51cf66, #2f9e44);
  box-shadow:
    0 6px 0 #1b7a32,
    0 10px 22px rgba(0,0,0,0.35);
}
.mode-btn:active {
  transform: translateY(3px);
  box-shadow:
    0 2px 0 rgba(0,0,0,0.4),
    0 4px 10px rgba(0,0,0,0.25);
}

/* -----------------------------
Status & messages
----------------------------- */
.status-row {
  margin-top: 4px;
  margin-bottom: 4px;
  display:flex;
  flex-direction:column;
  gap:6px;
  width:100%;
  font-weight:700;
  color:#fff;
  align-items:center;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.35);
}

/* Player positions â€” bigger */
.status-row .positions {
  font-size: clamp(1.9rem, 3.4vw, 2.6rem);
  font-weight: 900;
  letter-spacing: 0.5px;
}

/* Messages â€” bigger & readable */
.message {
  margin-top: 2px;
  margin-bottom: 18px;
  color:#fff;
  min-height:32px;
  width:100%;
  text-align:center;
  font-size: clamp(1.6rem, 3vw, 2.1rem);
  font-weight:900;
  line-height:1.25;
  padding: 4px 8px;
  word-wrap: break-word;
  white-space: normal;
  text-shadow: 0 2px 4px rgba(0,0,0,0.35);
}

/* -----------------------------
Responsive tweaks
----------------------------- */
@media (max-width: 768px) {
  .app {
    flex-direction: column;
    align-items: center;
  }
  .control-column {
    width: 100%;
    max-width: 90%;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-around;
  }
  .controls-row,
  .bottom-row {
    flex-direction: row;
    flex-wrap: wrap;
    gap:8px;
  }
}

/* Game Mode Toggle (Safe Visual) */
.mode-toggle.modern {
  display: flex;
  gap: 10px;
  width: 100%;
  justify-content: center;
}
.mode-btn {
  flex: 1;
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  border: none;
  color: #fff;
  letter-spacing: 0.3px;
  transition:
    transform 0.12s ease,
    box-shadow 0.12s ease,
    filter 0.12s ease,
    background 0.2s ease;
}
/* Default (inactive) */
.mode-btn {
  background: linear-gradient(180deg, #6b4a2b, #4b2a12);
  box-shadow: 0 5px 0 #3a1f0d, 0 8px 18px rgba(0,0,0,0.35);
  opacity: 0.75;
}
.mode-btn:hover { filter: brightness(1.08); }
/* Active common */
.mode-btn.active {
  opacity: 1;
  transform: translateY(2px);
}
/* ðŸ‘¥ Two Player â€” BLUE */
#mode-2p.active {
  background: linear-gradient(180deg, #2b6ef6, #1e4fbf);
  box-shadow: 0 3px 0 #153b8f, 0 8px 18px rgba(0,0,0,0.35);
}
/* ðŸ¤– Vs Computer â€” GREEN */
#mode-ai.active {
  background: linear-gradient(180deg, #2ecc71, #1e9e55);
  box-shadow: 0 3px 0 #157a40, 0 8px 18px rgba(0,0,0,0.35);
}

/* ---------- Mobile & PWA (Portrait Only Gameplay) ---------- */
@media (max-width: 900px) {
  .app {
    display: flex;
    flex-direction: column;
    height: auto;
    min-height: 100dvh;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .board-column {
    flex: 0 0 auto;
    width: 100%;
    max-height: none;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .board-wrapper {
    width: min(96vw, 420px);
    aspect-ratio: 1 / 1;
  }

  .control-column {
    flex: 1 1 auto;
    width: 100%;
    height: auto !important;
    max-height: none;
    overflow-y: visible;
    padding-bottom: 16px;
  }

  .controls-row,
  .bottom-row,
  .mode-toggle {
    padding-inline: 12px;
  }
}

/* ---------- Landscape lock (phones) ---------- */
@media (max-width: 900px) and (orientation: landscape) {
  body::before {
    content: "Rotate your device to Portrait mode to play";
    position: fixed;
    inset: 0;
    background: #0b0e14;
    color: #fff;
    font-size: 1.1rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    text-align: center;
    padding: 24px;
  }
  .app {
    display: none !important;
  }
}

/* ---------- Desktop (unchanged behavior) ---------- */
@media (min-width: 901px) {
  .app {
    display: flex;
    flex-direction: row;
    align-items: stretch;
  }
  .board-column {
    flex: 0 0 auto;
  }
  .control-column {
    overflow: hidden;
  }
}

/* Update toast (bottom banner) */
#update-toast {
  position: fixed;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(30,30,30,0.92);
  color: #fff;
  padding: 12px 16px;
  border-radius: 12px;
  display: flex;
  gap: 12px;
  align-items: center;
  z-index: 9999;
  font-weight: 700;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
}
#update-toast button {
  background: linear-gradient(180deg, #51cf66, #2f9e44);
  border: none;
  color: #fff;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 800;
}
